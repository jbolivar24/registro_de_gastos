<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Ventas</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <button id="btnQuickLogout" class="quick-logout" title="Guardar y cerrar sesiÃ³n"> Guardar y cerrar sesiÃ³n ğŸ’¾ğŸ”’ </button>

  <h1>VENTAS</h1>

  <form id="ventaForm">

    <input type="date" id="fecha" required>
    <input type="text" id="factura" placeholder="Factura" required>
    <input type="text" id="cliente" placeholder="Cliente" required>

    <h3>Detalle de la venta</h3>

    <div class="item-row">
      <select id="producto">
        <option value="">Seleccione producto</option>
      </select>

      <input type="number" id="cantidad" placeholder="Cantidad" min="1">
      <input type="number" id="precio" placeholder="Precio venta">
      <button type="button" id="btnAgregarItem" class="btn-mini">â•</button>
    </div>

    <table id="tablaItems"></table>

    <div class="totales">
      <div>Neto: <strong id="neto">$0</strong></div>
      <div>IVA 19%: <strong id="iva">$0</strong></div>
      <div>Total: <strong id="total">$0</strong></div>
    </div>

    <button>Guardar Venta</button>
  </form>

  <div class="date-range">
    <label>
      Desde
      <input type="date" id="ventaDesde">
    </label>

    <label>
      Hasta
      <input type="date" id="ventaHasta">
    </label>

    <button type="button" id="btnFiltrarVentas">Consultar</button>
  </div>

  <table id="tablaVentas"></table>

  <div class="export-actions">
    <button type="button" class="btn-secondary" onclick="exportVentasCSV()">â¬‡ï¸ Exportar CSV</button>
    <button type="button" class="btn-secondary" onclick="exportVentasPDF()">ğŸ–¨ï¸ Exportar PDF</button>
  </div>

  <div class="footer-actions">
    <a href="index.html" class="btn-volver">â† Volver al resumen</a>
  </div>

  <script src="data.js"></script>
  <script src="backup.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>
  <script src="ventas.js"></script>
  <script src="navigation.js"></script>
  <script src="session.js"></script>
  <script src="quickLogout.js"></script>
  <script src="logoutModal.js"></script>

  <!-- MODAL DETALLE VENTA -->
  <div id="modalDetalle" class="modal hidden">
    <div class="modal-content">
      <h3>Detalle de la venta</h3>
      <div id="modalBody"></div>
      <div class="modal-actions">
        <button onclick="cerrarModal()">Cerrar</button>
      </div>
    </div>
  </div>

  <!-- =========================
     MODAL CERRAR SESIÃ“N
     ========================= -->
<div id="modalLogout" class="modal hidden">
  <div class="modal-card">
    <h2>ğŸ”’ Cerrar sesiÃ³n</h2>
    <p>
      Se crearÃ¡ automÃ¡ticamente un archivo de respaldo<br>
      y se finalizarÃ¡ la sesiÃ³n actual.
    </p>

    <div class="modal-actions">
      <button id="btnConfirmLogout">Guardar y cerrar</button>
      <button id="btnCancelLogout">Cancelar</button>
    </div>
  </div>
</div>

</body>
</html>
